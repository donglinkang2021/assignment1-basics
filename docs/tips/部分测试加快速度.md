# 部分测试加快速度

您好，`uv run pytest` 会运行项目中的所有测试，其中一些测试（例如对大数据集进行分词或完整的模型训练）可能会很慢。

为了加快测试速度，您可以在 `pytest` 命令后面指定要运行的特定测试文件或测试函数。这样，您就可以只关注当前正在开发的部分。

例如：
*   只运行与分词器（tokenizer）相关的测试：
    ```bash
    uv run pytest tests/test_tokenizer.py
    ```
*   只运行模型（model）中的一个特定测试，比如 `test_rope`：
    ```bash
    uv run pytest tests/test_model.py::test_rope
    ```

关于从哪里开始，根据项目 README.md 的说明，您应该从编辑 `tests/adapters.py` 文件入手。这个文件包含了一系列函数，它们是连接您的实现和测试代码的桥梁。

建议的实现顺序如下：

1.  **分词器 (Tokenizer)**:
    *   在 `tests/adapters.py` 中实现 `run_train_bpe` 和 `get_tokenizer_from_vocab_merges_path` 等函数。
    *   使用 `uv run pytest tests/test_train_bpe.py` 和 `uv run pytest tests/test_tokenizer.py` 来测试您的实现。

2.  **数据加载 (Data Loading)**:
    *   在 `tests/adapters.py` 中实现 `run_get_batch` 函数。
    *   使用 `uv run pytest tests/test_data.py` 来进行测试。

3.  **模型组件 (Model Components)**:
    *   在 `tests/adapters.py` 中逐个实现模型的各个部分，例如 `run_rope`, `run_swiglu`, `run_scaled_dot_product_attention`, `run_transformer_block` 等。
    *   针对您实现的每个组件，运行 `tests/test_model.py` 中对应的测试来进行验证。

4.  **优化器 (Optimizer)**:
    *   在 `tests/adapters.py` 中实现 `get_adamw_cls` 和 `run_get_lr_cosine_schedule`。
    *   使用 `uv run pytest tests/test_optimizer.py` 来测试。

按照这个顺序，每次只关注一个部分并运行相关的测试，可以大大提高您的开发效率。当您完成了所有部分的实现后，再运行 `uv run pytest` 来确保所有测试都能通过。